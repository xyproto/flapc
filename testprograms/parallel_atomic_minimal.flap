// Minimal test for atomic operations crash
println("Testing atomic_store in parallel loop")

ptr := malloc(8)
atomic_store(ptr, 0)

@@ i in 0..<2 {
    // This should crash
    atomic_add(ptr, 1)
}

println("If you see this, the bug is fixed!")
