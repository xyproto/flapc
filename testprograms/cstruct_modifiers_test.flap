// Test packed and aligned modifiers for cstruct

// Normal struct (with automatic padding)
cstruct Normal {
    a as uint8
    b as uint64
    c as uint8
}

// Packed struct (no padding between fields)
cstruct Packed packed {
    a as uint8
    b as uint64
    c as uint8
}

// Aligned struct (custom alignment)
cstruct Aligned16 aligned(16) {
    a as uint8
    b as uint64
    c as uint8
}

// Packed AND aligned (no padding, but struct aligned to 16 bytes)
cstruct PackedAligned packed aligned(16) {
    a as uint8
    b as uint64
    c as uint8
}

printf("Struct Layout Comparison:\n")
printf("=========================\n\n")

printf("Normal (default alignment):\n")
printf("  Size: %.0f bytes\n", Normal.size)
printf("  a offset: %.0f\n", Normal.a.offset)
printf("  b offset: %.0f\n", Normal.b.offset)
printf("  c offset: %.0f\n", Normal.c.offset)

printf("\nPacked (no padding):\n")
printf("  Size: %.0f bytes\n", Packed.size)
printf("  a offset: %.0f\n", Packed.a.offset)
printf("  b offset: %.0f\n", Packed.b.offset)
printf("  c offset: %.0f\n", Packed.c.offset)

printf("\nAligned(16) (natural padding + 16-byte struct alignment):\n")
printf("  Size: %.0f bytes\n", Aligned16.size)
printf("  a offset: %.0f\n", Aligned16.a.offset)
printf("  b offset: %.0f\n", Aligned16.b.offset)
printf("  c offset: %.0f\n", Aligned16.c.offset)

printf("\nPacked + Aligned(16) (no field padding, but 16-byte struct alignment):\n")
printf("  Size: %.0f bytes\n", PackedAligned.size)
printf("  a offset: %.0f\n", PackedAligned.a.offset)
printf("  b offset: %.0f\n", PackedAligned.b.offset)
printf("  c offset: %.0f\n", PackedAligned.c.offset)

printf("\nExpected results:\n")
printf("  Normal: 24 bytes (u8 + 7 pad + u64 + u8 + 7 pad)\n")
printf("  Packed: 10 bytes (u8 + u64 + u8, no padding)\n")
printf("  Aligned16: 32 bytes (naturally 24, rounded up to 16-byte boundary)\n")
printf("  PackedAligned: 16 bytes (packed to 10, rounded up to 16-byte boundary)\n")
