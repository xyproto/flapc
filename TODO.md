# Plans

- [ ] Implement parallel loop reducers for combining thread-local results: sum = @@ i in 0..<N { i * i } | a,b | { a + b }
- [ ] Generate code for partial result storage (thread-local)
- [ ] Generate code for atomic combination (LOCK or mutex)
- [ ] Test with simple addition
- [ ] Atomic operations for shared state (LOCK XADD, CMPXCHG)
- [ ] Printf support in parallel loops (via wrapper or PIC)
- [ ] Dynamic range bounds (currently constants only)
- [ ] Shared memory setup (mmap'd code region + function pointer table)
- [ ] Extract machine code with `ExtractFunctionCode()`
- [ ] IPC signaling (Unix socket)
- [ ] Atomic pointer updates with memory barriers
- [ ] Test: change getValue() from 42 â†’ 100 while running
- [ ] Check sendto()/recvfrom() return values
- [ ] Print error messages with errno
- [ ] Continue on failure instead of crashing
- [ ] Convert bytes to Flap string
- [ ] Extract sender IP and port from sockaddr_in
- [ ] Store in `msg` and `from` variables
- [ ] Hash map for sender addresses
- [ ] Track last_seen timestamp
- [ ] Timeout stale connections (60s)
- [ ] `atomic_add(ptr, value)` builtin (LOCK XADD)
- [ ] `atomic_cas(ptr, old, new)` builtin (LOCK CMPXCHG)
- [ ] `mutex_lock(ptr)` / `mutex_unlock(ptr)` (futex)
- [ ] Test: increment shared counter from 4 threads
- [ ] Parse C++ header files
- [ ] Handle name mangling
- [ ] Support callback function pointers
- [ ] Achievement and leaderboard wrappers
- [ ] Test: unlock achievement from Flap
- [ ] Parallel loops: test reducers with 10k items
- [ ] Hot reload: test changing physics constants live
- [ ] Networking: test 1000 messages/second throughput
- [ ] Clean VM: install and run on fresh Ubuntu 22.04
- [ ] Memory: run valgrind, fix any leaks
- [ ] Add parallel loop examples to testprograms/
- [ ] **ENet Protocol**: Reliable channels, packet ordering, ACKs
- [ ] **Trampolines**: Deep recursion without stack overflow
- [ ] **Macros**: Compile-time metaprogramming
- [ ] **CPS Transform**: All function calls become tail calls
- [ ] **Multiplatform**: Windows, macOS ARM, RISC-V
- [ ] **Python Syntax**: Colon + indentation alternative
- [ ] **Let Bindings**: Local recursive definitions
- [ ] Parallel loops (most straightforward runtime)
- [ ] ENet networking (most complex, needs research)
- [ ] Fix fork parsing (operator disambiguation)
- [ ] Hot reload integration (needs IPC design)
