// ARM64 comprehensive test
import libc as c

fib = n { 0 | 1 => n _ => fib(n - 1) + fib(n - 2) }

factorial = n { 0 | 1 => 1 _ => n * factorial(n - 1) }

sum_list = lst { [] => 0 _ => head(lst) + sum_list(tail(lst)) }

main = {
  c.puts("ARM64 Flap Test Suite")
  c.puts("=====================")
  
  c.puts("Testing fibonacci (should be 55):")
  c.printf("%d\n", fib(10))
  
  c.puts("Testing factorial (should be 120):")
  c.printf("%d\n", factorial(5))
  
  c.puts("Testing list operations:")
  result := sum_list([1, 2, 3, 4, 5])
  c.printf("Sum of [1,2,3,4,5] = %d\n", result)
  
  c.puts("Testing string operations:")
  str := "Hello from ARM64!"
  c.printf("%s\n", str)
  
  c.puts("All tests completed!")
  0
}
